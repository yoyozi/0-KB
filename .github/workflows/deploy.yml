name: Deploy knowledgebase

on:
  push:
    branches: [ main ]
  workflow_dispatch: {}

jobs:
  deploy:
    uses: ./.github/workflows/nextjs-standalone-deploy.yml
    with:
      remote_path: /var/www/knowledgebase.netsecurity.co.za/app
      service_name: knowledgebase-netsecurity-co-za
      app_port: 3003
      host_header: knowledgebase.netsecurity.co.za
      env_file: /etc/knowledgebase.netsecurity.co.za.env
    secrets:
      SSH_HOST: ${{ secrets.SSH_HOST }}
      SSH_USER: ${{ secrets.SSH_USER }}
      SSH_KEY: ${{ secrets.SSH_KEY }}